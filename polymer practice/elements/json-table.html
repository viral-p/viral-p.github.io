<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="json-table" attributes = "tableTitle _json">
	<template>
		<style>
			table{
			border-width: medium;
			border-color: black;
			}
		</style>
		<b>{{tableTitle}}</b>
		<table id="display">
			<tr id="TableHeading">
				<template repeat="{{heading, i in tableHeadings}}">
					<th>{{heading}}</th>
				</template>
			</tr>
			<template repeat="{{entry, j in _json}}">
				<tr>
					<template repeat="{{heading, i in tableHeadings}}">
						<td> {{entry[heading]}} </td>
					</template>
				</tr>
			</template>
		</table>
	</template>
	
	<script>
		Polymer({
			tableTitle: "JSON-Table",
			tableHeadings: [],
			createHeaders: function(){
				this.tableHeadings = Object.keys(this._json[0]);
			},
			ready: function(){
				if(typeof this._json == "string"){
					this._json = JSON.parse(this._json);
				}
				if(this._json.length > 0)
				{
					console.log(this._json);
				}
				this.createHeaders();
			}
		});
	</script>
</polymer-element>